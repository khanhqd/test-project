(this["webpackJsonpyoutube-share"]=this["webpackJsonpyoutube-share"]||[]).push([[0],{167:function(e,t,n){},182:function(e,t,n){},252:function(e,t,n){},269:function(e,t,n){},270:function(e,t,n){"use strict";n.r(t);var r,a,c=n(0),i=n.n(c),s=n(22),o=n.n(s),u=(n(167),n(168),n(21)),l=n.n(u),d=n(29),j=n(279),h=n(38),p=n(277),f=n(276),b=n(58),O=n(278),v=n(272),m=n(273),x=n(70),g=n.p+"static/media/logo.6ce24c58.svg",w=n(51),k=n(40),y=n(162),S=n(173),T=n(176),C="http://178.128.222.54:8081",L=new function e(){var t=this;Object(w.a)(this,e),this.token="",this.setToken=function(e){t.token=e},this.makeSignature=function(e){var t=Object(k.a)({},e);t.ts=(new Date).getTime();var n=Object.keys(t).sort().map((function(e){return t[e]})),r=T(n.join("")+"remitano-test-exam").toString();return Object.assign(t,{sign:r})},this.stringify=function(e){return JSON.stringify(e)},this.querify=function(e,t){var n=e;return void 0===t?n:n+="?".concat(S.stringify(t))},this.handleException=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.exception_code){e.next=2;break}throw new Error("Unknown API Error");case 2:throw new Error(t.message);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.get=function(){var e=Object(d.a)(l.a.mark((function e(n){var r,a,c,i,s,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.url,a=void 0===r?"":r,c=n.data,i=void 0===c?{}:c,e.prev=1,s=t.querify(C+a,i&&0!==Object.keys(i).length?t.makeSignature(i):t.makeSignature({})),e.next=5,fetch(s,{headers:{"Content-Type":"application/json",authorization:t.token}});case 5:return o=e.sent,e.next=8,o.json();case 8:if((u=e.sent)&&u.success){e.next=12;break}return e.next=12,t.handleException(u);case 12:return e.abrupt("return",null===u||void 0===u?void 0:u.data);case 15:e.prev=15,e.t0=e.catch(1),y.a.error({message:(null===e.t0||void 0===e.t0?void 0:e.t0.message)||e.t0.toString()});case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),this.post=function(){var e=Object(d.a)(l.a.mark((function e(n){var r,a,c,i,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.url,a=void 0===r?"":r,c=n.data,i=void 0===c?{}:c,e.prev=1,e.next=4,fetch(C+a,{method:"POST",headers:{"Content-Type":"application/json",authorization:t.token},body:t.stringify(t.makeSignature(i))});case 4:return s=e.sent,e.next=7,s.json();case 7:if((o=e.sent)&&o.success){e.next=11;break}return e.next=11,t.handleException(o);case 11:return e.abrupt("return",null===o||void 0===o?void 0:o.data);case 14:e.prev=14,e.t0=e.catch(1),y.a.error({message:(null===e.t0||void 0===e.t0?void 0:e.t0.message)||e.t0.toString()});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}()},P=n(55),I=(n(179),n(126)),E=n(145),N=n.n(E);!function(e){e.UPDATE_INFO="UPDATE_INFO",e.LOG_OUT="LOG_OUT"}(r||(r={})),function(e){e.RELOAD="RELOAD"}(a||(a={}));var D={posts:[],total:0},R={email:"",token:""},F={post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.RELOAD:return Object(k.a)(Object(k.a)({},e),{},{posts:t.data,total:t.total});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.UPDATE_INFO:return Object(k.a)(Object(k.a)({},e),t.data);case r.LOG_OUT:return R;default:return e}}};var U={key:"root",storage:N.a},_=Object(P.b)(F),A=Object(I.a)(U,_),z=Object(P.c)(A,P.a.apply(void 0,[])),M=Object(I.b)(z),G=z,B=new function e(){Object(w.a)(this,e),this.login=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.post({url:"/api/login",data:t});case 2:(n=e.sent)&&(G.dispatch({type:r.UPDATE_INFO,data:n}),L.setToken(n.token));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.logout=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G.dispatch({type:r.LOG_OUT});case 1:case"end":return e.stop()}}),e)})))},q=(n(182),n(7)),H=j.a.Header,J=function(e){var t=Object(x.b)((function(e){return e.user})),n=t.token,r=t.email,a=Object(c.useState)(""),i=Object(h.a)(a,2),s=i[0],o=i[1],u=Object(c.useState)(""),j=Object(h.a)(u,2),w=j[0],k=j[1],y=Object(c.useState)(!1),S=Object(h.a)(y,2),T=S[0],C=S[1],L=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,B.login({email:s,password:w});case 3:C(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){p.a.confirm({content:"Confirm to logout?",onOk:function(){B.logout()},okText:"OK",okButtonProps:{danger:!0},cancelButtonProps:{hidden:!0}})};return Object(q.jsx)(H,{children:Object(q.jsxs)(v.a,{children:[Object(q.jsx)(m.a,{xs:0,sm:0,md:10,children:Object(q.jsxs)(v.a,{align:"middle",children:[Object(q.jsx)("img",{src:g,className:"appLogo",alt:"logo"}),Object(q.jsx)("span",{className:"appName",children:"Funny Movies"})]})}),Object(q.jsx)(m.a,{sm:24,md:14,className:"right-box-container",children:n?Object(q.jsxs)("div",{className:"actions-container",children:[Object(q.jsx)(f.a.Text,{style:{color:"white"},children:r}),Object(q.jsx)(b.a,{className:"margin-horizontal-16",onClick:e.onPressShare,type:"primary",children:"Share a movie"}),Object(q.jsx)(b.a,{onClick:P,children:"Logout"})]}):Object(q.jsxs)("div",{className:"actions-container",children:[Object(q.jsx)(O.a,{placeholder:"Email",value:s,onChange:function(e){return o(e.target.value)}}),Object(q.jsx)(O.a.Password,{placeholder:"Password",value:w,onChange:function(e){return k(e.target.value)},className:"margin-horizontal-16"}),Object(q.jsx)(b.a,{loading:T,onClick:L,type:"primary",children:"Login / Register"})]})})]})})},V=new function e(){Object(w.a)(this,e),this.shareLink=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.post({url:"/api/posts/create",data:{url:t}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getListPost=Object(d.a)(l.a.mark((function e(){var t,n,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:1,e.next=3,L.get({url:"/api/posts",data:{limit:10,offset:10*(t-1)}});case 3:(n=e.sent)&&G.dispatch({type:a.RELOAD,data:n.data,total:n.total});case 5:case"end":return e.stop()}}),e)})))},K=n(274),Y=(n(252),f.a.Paragraph),Q=function(e){var t;return Object(q.jsxs)(K.b.Item,{onClick:e.onClick,extra:Object(q.jsx)("img",{width:272,alt:"thumnail",src:e.thumbnail}),children:[Object(q.jsx)(K.b.Item.Meta,{title:Object(q.jsx)("a",{href:e.url,target:"_blank",children:e.title}),description:"Share by: ".concat(null===(t=e.author)||void 0===t?void 0:t.email)}),Object(q.jsx)(Y,{ellipsis:{rows:4},children:e.description})]},e.youtubeId)},W=function(e){var t=Object(x.b)((function(e){return e.post})),n=t.posts,r=t.total;return Object(q.jsx)(K.b,{itemLayout:"vertical",size:"large",pagination:{onChange:function(e){return V.getListPost(e)},pageSize:10,total:r},dataSource:n,renderItem:function(t,n){return Object(c.createElement)(Q,Object(k.a)(Object(k.a)({},t),{},{key:"video".concat(n),onClick:function(){e.onClickVideo(t.youtubeId)}}))}})},X=n(275),Z={},$=new function e(){Object(w.a)(this,e),this.state={runOnceInTimestamp:0},this.waitDelay=function(e){return new Promise((function(t){setTimeout((function(){t(!0)}),e)}))},this.runOnceIn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"null",t=arguments.length>1?arguments[1]:void 0;return function(n){var r=(new Date).getTime();if((!Z[e]||r-Z[e]>t)&&(Z[e]=r,"function"===typeof n))return n()}}},ee=function(e,t){var n=X.a.useForm(),r=Object(h.a)(n,1)[0],a=Object(c.useState)(!1),i=Object(h.a)(a,2),s=i[0],o=i[1],u=Object(c.useState)(!1),j=Object(h.a)(u,2),f=j[0],v=j[1];Object(c.useImperativeHandle)(t,(function(){return{showModal:function(){o(!0),r.resetFields()}}}));var m=function(){return o(!1)},x=function(){var t=Object(d.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n&&n["url-input"]){t.next=3;break}return t.abrupt("return");case 3:return v(!0),t.next=6,$.waitDelay(2e3);case 6:return t.next=8,V.shareLink(n["url-input"]);case 8:t.sent&&(e.onShareSuccess&&e.onShareSuccess(),m()),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(0);case 14:return t.prev=14,v(!1),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[0,12,14,17]])})));return function(e){return t.apply(this,arguments)}}();return Object(q.jsx)(p.a,{title:"Share movie",visible:s,onOk:r.submit,onCancel:m,footer:[Object(q.jsx)(b.a,{type:"primary",loading:f,onClick:r.submit,children:"Submit"},"submit")],children:Object(q.jsx)(X.a,{form:r,name:"time_related_controls",onFinish:x,children:Object(q.jsx)(X.a.Item,{name:"url-input",label:"Youtube URL",rules:[{required:!0,message:"Please input URL"},{type:"url",message:"This field must be a valid URL"}],children:Object(q.jsx)(O.a,{placeholder:"Input youtube link to share"})})})})},te=Object(c.forwardRef)(ee),ne=n(149),re=n(151),ae=function(e,t){var n=Object(c.useState)(!1),r=Object(h.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(""),o=Object(h.a)(s,2),u=o[0],l=o[1],d=Object(c.useState)(!1),j=Object(h.a)(d,2),f=j[0],b=j[1];Object(c.useImperativeHandle)(t,(function(){return{showModal:function(e){l(e),i(!0),setTimeout((function(){b(!0)}),200)}}}));return Object(q.jsx)(p.a,{className:"video-player-wrap",visible:a,destroyOnClose:!0,width:660,footer:null,title:null,centered:!0,onCancel:function(){i(!1),b(!1)},children:f?Object(q.jsx)(re.a,{onReady:function(e){},videoId:u,opts:{height:"360",width:"640",playerVars:{autoplay:1}}}):Object(q.jsx)(ne.a,{size:"large"})})},ce=Object(c.forwardRef)(ae),ie=(n(269),function(e){var t=Object(c.useRef)(null),n=Object(c.useRef)(null);Object(c.useEffect)((function(){r()}),[]);var r=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V.getListPost();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(q.jsxs)("div",{className:"container",children:[Object(q.jsxs)(j.a,{children:[Object(q.jsx)(J,{onPressShare:function(){var e;null===(e=t.current)||void 0===e||e.showModal()}}),Object(q.jsx)("div",{className:"contentContainer",children:Object(q.jsx)(W,{onClickVideo:function(e){var t;e&&(null===(t=n.current)||void 0===t||t.showModal(e))}})})]}),Object(q.jsx)(te,{ref:t,onShareSuccess:r}),Object(q.jsx)(ce,{ref:n})]})}),se=n(154);var oe=function(){return Object(q.jsx)(x.a,{store:G,children:Object(q.jsx)(se.PersistGate,{loading:Object(q.jsx)(ne.a,{}),persistor:M,children:Object(q.jsx)(ie,{})})})},ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,280)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};o.a.render(Object(q.jsx)(i.a.StrictMode,{children:Object(q.jsx)(oe,{})}),document.getElementById("root")),ue()}},[[270,1,2]]]);
//# sourceMappingURL=main.fcec7419.chunk.js.map